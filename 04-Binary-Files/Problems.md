# Задачи към [Бинарни файлове. Аргументи на командния ред](./)

## P1

В програмата ще работим със структурата **Person**:

- **име** -> низ с произволна дължина
- **фамилия** -> низ с произволна дължина
- **години** -> цяло число
- **тегло в килограми** -> реално число

Напишете програма, която работи в 2 различни режима в зависимост от броя на аргументите на командния ред:

### Read режим

Ако има само 1 команден аргумент, който е низ репрезентиращ името на бинарен файл. Програмата трябва да прочете информация за обект от тип **Person**.

### Write режим

Ако има повече от 1 команден аргумент, които са следните (в следният ред):

- низ, който репрезентира име на файл,
- низ, който репрезентира име на човек,
- низ, който репрезентира фамилия на човек,
- цяло число, което репрезентира години на човек,
- реално число, което репрезентира тежест в килограми на човек.

Добавете валидация за коректност на реда на аргументите и техните типове. Записвате данните в структура тип Person и после записва тази структура във файл.

## P2

Структура **PhonebookEntry**:

- **име** -> низ с произволна дължина (не повече от 50)
- **фамилия** -> низ с произволна дължина (не повече от 50)
- **град** -> низ с произволна дължина (не повече от 50)
- **телефонен номер** -> 10 цифри


Напишете програма, която получава като командни аргументи име на файл и режим на работа. Файла винаги ще е бинарен и ще пази информация за телефонен указател. Възможните режими на работа са следните:

- **write** -> Записва номера в края на файла
- **read** -> Дава възможност за търсене на номера по град, име, фамилия или име + фамилия. Като изписва нужната информация за един номер.

## P3

Структура на карта:

- **боя** -> един от следните низове: "clubs", "diamonds", "hearts", "spades"
- **символ** -> един от следните символи: '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'

Напишете програма, която получава като команден аргумент име на файл. Този файл ще бъде бинарен и ще съдържа инфорамция за карти (тесте). Програмата трябва да работи в безкраен цикъл като прочита от конзолата символ репрезентиращ команда:

- 'a' -> Добавя карта, въведена от потребителя, в тестето на определен от потребителя индекс (трябва да е валиден - в началото, края или между тях)
- 'c' -> Разменя карта на определен индекс с друга карта, въведена от потребителя.
- 'p' -> Принтира информация за карта на определен от потребителя индекс.
- 'd' -> Принтира информация за всички карти.
- 'r' -> Премахва карта на определен от потребителя индекс и принтира информация за нея.
- 'е' -> Приключва работата на програмата.

**ВАЖНО:** Не трябва да имате запазени всички карти в масив, върху който да работите и после да го запишете във файла. Всяка операция трябва да си отваря файла и да си работи с него (въвежда и/или чете).

## P4

### Какво е BMP (Bitmap) файла:

BMP файловете са едни от най-простите формати за съхранение на изображения. Те представялват двоични файлове, които имат следните особености:

- Състоят се от две основни части - служебна информация за изображението (метаданни) и матрица от пиксели (практическото съдържание на изображението)
- Не ни е необходима цялата информация от метаданните; трябват ни само:
  - сигнатура (първите два байта "BM"), която идентифицира файла като BMP.
  - размерът на файла (позиция 2, 4 байта)
  - позицията, на която започва матрицата от пиксели (позиция 10, 4 байта)
  - брой колони на матрицата от пиксели (позиция 18, 4 байта)
  - брой редове на матрицата от пиксели (позиция 22, 4 байта)
- Всеки пиксел се състои от 3 байта, по един за всеки от основните три цвята - червено, зелено и синьо (RGB) (стойности между 0 и 255)
- Всеки ред има padding, допълващ броя на байтовете на всеки ред да бъде число, делящо се на 4
- Информацията в padding-a се игнорира при визуализиране на изображението и трябва да бъдат запазени непроменени при обработка на файла

### Задача

Напишете програма, която получава следните аргументи от командния ред:

- име на входен файл
- име на изходен файл
- трансформация, която трябва да се приложи

Програмата трябва да извършва валидация, че подаденият входен файл е валиден BMP файл. След което коректно обработва метаданните и ги принтирайте на конзолата. После извършва зададената по-рано трансформация:

- **invert** -> За всеки пиксел в изображението, инвертира цвета му, като заменя всяка компонентна стойност (червено, зелено, синьо) със стойността 255 минус оригиналната стойност:
  - newValue = 255 - oldValue
- **grayscale** -> За всеки пиксел в изображението ще се заменя всяка компонентна стойност със следната:
  - newValue = 0.299×R+0.587×G+0.114×B

И накрая записва новото изображение в подадения изходен файл.
